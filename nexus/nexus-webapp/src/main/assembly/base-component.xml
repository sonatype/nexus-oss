<component>
  <dependencySets>
    <dependencySet>
      <outputDirectory>/lib</outputDirectory>
      <fileMode>0644</fileMode>
      <scope>provided</scope>
      <includes>
        <include>org.sonatype.appbooter.plexus-platforms:plexus-platform-jsw</include>
      </includes>
    </dependencySet>
  </dependencySets>
  <fileSets>
    <fileSet>
      <directory>${basedir}/src/main/base-bundle</directory>
      <outputDirectory>/</outputDirectory>
      <fileMode>0644</fileMode>
    </fileSet>
    
    <!-- Incorporate the unpacked jsw-binaries content, which was filtered during the process-resources phase. 
         NOTE: Only include the wrapper executables here, so we can set the executable file attribute.
    -->
    <fileSet>
      <directory>${project.build.outputDirectory}/bin/jsw</directory>
      <outputDirectory>bin/jsw</outputDirectory>
      <includes>
        <include>**/wrapper</include>
        <include>**/wrapper.exe</include>
      </includes>
      <fileMode>0755</fileMode>
    </fileSet>
    
    <!-- Incorporate the unpacked jsw-binaries content, which was filtered during the process-resources phase. 
         NOTE: Only include the shared libraries here. The app scripts will be handled individually later in the
         <files/> section, and the wrapper executables are handled above, where the executable bit is set.
    -->
    <fileSet>
      <directory>${project.build.outputDirectory}/bin/jsw</directory>
      <outputDirectory>bin/jsw</outputDirectory>
      <excludes>
        <exclude>**/app</exclude>
        <exclude>**/*.bat</exclude>
        <exclude>**/wrapper</exclude>
        <exclude>**/wrapper.exe</exclude>
      </excludes>
    </fileSet>
  </fileSets>
  <files>
    <!-- Change from generic script name of 'app' to 'nexus' 
         NOTE: See http://jira.codehaus.org/browse/MASSEMBLY-45 for a better way to do this 
         that unfortunately hasn't been implemented yet.
    -->
    <file>
      <source>${project.build.outputDirectory}/bin/jsw/linux-ppc-64/app</source>
      <outputDirectory>bin/jsw/linux-ppc-64</outputDirectory>
      <destName>nexus</destName>
      <fileMode>0755</fileMode>
    </file>
    <file>
      <source>${project.build.outputDirectory}/bin/jsw/linux-x86-32/app</source>
      <outputDirectory>bin/jsw/linux-x86-32</outputDirectory>
      <destName>nexus</destName>
      <fileMode>0755</fileMode>
    </file>
    <file>
      <source>${project.build.outputDirectory}/bin/jsw/linux-x86-64/app</source>
      <outputDirectory>bin/jsw/linux-x86-64</outputDirectory>
      <destName>nexus</destName>
      <fileMode>0755</fileMode>
    </file>
    <file>
      <source>${project.build.outputDirectory}/bin/jsw/macosx-universal-32/app</source>
      <outputDirectory>bin/jsw/macosx-universal-32</outputDirectory>
      <destName>nexus</destName>
      <fileMode>0755</fileMode>
    </file>
    <file>
      <source>${project.build.outputDirectory}/bin/jsw/solaris-sparc-32/app</source>
      <outputDirectory>bin/jsw/solaris-sparc-32</outputDirectory>
      <destName>nexus</destName>
      <fileMode>0755</fileMode>
    </file>
    <file>
      <source>${project.build.outputDirectory}/bin/jsw/solaris-sparc-64/app</source>
      <outputDirectory>bin/jsw/solaris-sparc-64</outputDirectory>
      <destName>nexus</destName>
      <fileMode>0755</fileMode>
    </file>
    <file>
      <source>${project.build.outputDirectory}/bin/jsw/solaris-x86-32/app</source>
      <outputDirectory>bin/jsw/solaris-x86-32</outputDirectory>
      <destName>nexus</destName>
      <fileMode>0755</fileMode>
    </file>
    <!-- Windows scripts -->
    <file>
      <source>${project.build.outputDirectory}/bin/jsw/windows-x86-32/App.bat</source>
      <outputDirectory>bin/jsw/windows-x86-32</outputDirectory>
      <destName>Nexus.bat</destName>
      <fileMode>0755</fileMode>
    </file>
    <file>
      <source>${project.build.outputDirectory}/bin/jsw/windows-x86-32/InstallApp.bat</source>
      <outputDirectory>bin/jsw/windows-x86-32</outputDirectory>
      <destName>InstallNexus.bat</destName>
      <fileMode>0755</fileMode>
    </file>
    <file>
      <source>${project.build.outputDirectory}/bin/jsw/windows-x86-32/PauseApp.bat</source>
      <outputDirectory>bin/jsw/windows-x86-32</outputDirectory>
      <destName>PauseNexus.bat</destName>
      <fileMode>0755</fileMode>
    </file>
    <file>
      <source>${project.build.outputDirectory}/bin/jsw/windows-x86-32/ResumeApp.bat</source>
      <outputDirectory>bin/jsw/windows-x86-32</outputDirectory>
      <destName>ResumeNexus.bat</destName>
      <fileMode>0755</fileMode>
    </file>
    <file>
      <source>${project.build.outputDirectory}/bin/jsw/windows-x86-32/StartApp.bat</source>
      <outputDirectory>bin/jsw/windows-x86-32</outputDirectory>
      <destName>StartNexus.bat</destName>
      <fileMode>0755</fileMode>
    </file>
    <file>
      <source>${project.build.outputDirectory}/bin/jsw/windows-x86-32/StopApp.bat</source>
      <outputDirectory>bin/jsw/windows-x86-32</outputDirectory>
      <destName>StopNexus.bat</destName>
      <fileMode>0755</fileMode>
    </file>
    <file>
      <source>${project.build.outputDirectory}/bin/jsw/windows-x86-32/UninstallApp.bat</source>
      <outputDirectory>bin/jsw/windows-x86-32</outputDirectory>
      <destName>UninstallNexus.bat</destName>
      <fileMode>0755</fileMode>
    </file>
  </files>
</component>
